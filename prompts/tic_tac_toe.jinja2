Generate a complete tic-tac-toe environment as a Python class `CustomEnv` that inherits from `gymnasium.Env`.

GAME RULES:
- 3x3 grid, players alternate placing X and O
- Win: 3 in a row (horizontal, vertical, diagonal)
- Draw: grid full with no winner
- Player 1 (X) goes first, Player -1 (O) goes second

TECHNICAL REQUIREMENTS:

1. **Action Space**: `spaces.Discrete(9)` (positions 0-8, row-major order)
2. **Observation Space**: `spaces.Box(low=-1, high=1, shape=(3,3), dtype=np.int8)`
3. **State Representation**: 
   - 0 = empty cell
   - 1 = player X 
   - -1 = player O

4. **Required Methods**:
   ```python
   def reset(self, seed=None, options=None):
       # Return (observation, info)
   
   def step(self, action):
       # Return (observation, reward, terminated, truncated, info)
   
   def valid_moves(self):
       # Return list of valid action indices (0-8)
   
   def render(self):
       # Print current board state
   ```

5. **Game Logic**:
   - `self.current_player` starts as 1 (X), alternates to -1 (O)
   - Rewards: +1 for win, -1 for loss, 0 for draw/ongoing
   - `terminated = True` when game ends (win/draw)
   - `truncated = False` (no time limits)

6. CRITICAL REQUIREMENT FOR INVALID MOVES:
If `step(action)` receives an action that is NOT in `valid_moves()`:
- Do NOT raise an Exception.
- Do NOT crash.
- Return `reward = -10` (heavy penalty).
- Return `terminated = False` (game continues, or ends if you prefer).
- The state should NOT change.

7. **Win Detection**: Check all 8 possible lines (3 rows, 3 cols, 2 diagonals)

8. **Libraries**: Use ONLY `import gymnasium as gym`, `import numpy as np`, `from gymnasium import spaces`

{% if failed_tests %}
DEBUGGING: The previous implementation failed with:
{{ failed_tests }}

Fix the specific errors shown above while maintaining the exact API.
{% endif %}

Generate ONLY the Python code. Start with imports and class definition.