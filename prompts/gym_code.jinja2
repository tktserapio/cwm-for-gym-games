Given the game description below, write a Python class `CustomEnv` that implements this game as a Gymnasium environment.

Game Description:
{{ rulebook }}

Requirements:
1. Inherit from `gymnasium.Env`.
2. **Action Space:** Use `spaces.Discrete(N)`.
3. **Observation Space:** Use `spaces.Box` (preferred) or flat `spaces.Dict`. 
   - CRITICAL: NO NESTED SPACES (no Dict inside Dict, no Tuple inside Tuple)
   - Valid: `spaces.Dict({'board': spaces.Box(...), 'player': spaces.Discrete(2)})`
   - INVALID: `spaces.Dict({'board': spaces.Box(...), 'tokens': spaces.Dict({...})})`
   - Prefer flattening complex state into a single `spaces.Box`
4. **Required Methods**:
   ```python
   def reset(self, seed=None, options=None):
       # Return (observation, info)
   
   def step(self, action):
       # Return (observation, reward, terminated, truncated, info)
   
   def valid_moves(self):
       # Return list of valid action indices
   
   def render(self):
       # Print current game state
   ```
5. **Game Logic**:
   - Rewards: +1 for win, -1 for loss, 0 for ongoing/draw
   - `terminated = True` when game ends (win/loss)
   - `truncated = False` (no time limits)
   - Environment switches `self.current_player` after each step
6. CRITICAL REQUIREMENT FOR INVALID MOVES:
If `step(action)` receives an action that is NOT in `valid_moves()`:
- Do NOT raise an Exception
- Do NOT crash
- Return `reward = -10` (heavy penalty)
- Return `terminated = False` (game continues)
- The state should NOT change
7. Use ONLY `numpy` and `gymnasium`.

{% if failed_tests %}
The previous implementation failed the following unit tests (CWM Refinement):
{{ failed_tests }}

Please fix the logic errors shown in the stack trace above.
{% endif %}

Return ONLY the Python code block.